<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	
	<modelVersion>4.0.0</modelVersion>
    
    <parent>
   		<groupId>eu.dnetlib.iis</groupId>
        <artifactId>iis-workflows</artifactId>
        <version>1.2.0-SNAPSHOT</version>
	</parent>
	
	<artifactId>iis-workflows-top</artifactId>
	<packaging>jar</packaging>
	
	<dependencies>
	
	   <dependency>
            <groupId>eu.dnetlib.iis</groupId>
            <artifactId>iis-core</artifactId>
            <version>${project.version}</version>
            <classifier>tests</classifier>
            <scope>test</scope>
        </dependency>
        
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-schemas</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-import</artifactId>
			<version>${project.version}</version>
			<exclusions>
			<!-- conflicts with ingest-pmc dependency and causes failures -->
				<exclusion>
					<groupId>jgrapht</groupId>
					<artifactId>jgrapht</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-ingest-pmc</artifactId>
			<version>${project.version}</version>
			<exclusions>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>servlet-api</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-ingest</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-export-actionmanager</artifactId>
			<version>${project.version}</version>
			<exclusions>
				<exclusion>
					<groupId>apache</groupId>
					<artifactId>commons-io</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-metadataextraction</artifactId>
			<version>${project.version}</version>
				<exclusions>
					<exclusion>
						<groupId>org.mortbay.jetty</groupId>
						<artifactId>servlet-api</artifactId>
					</exclusion>
					<!-- excluding duplicate -->
					<exclusion>
						<groupId>jdom</groupId>
						<artifactId>jdom</artifactId>
					</exclusion>
				</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-sentimentanalysis</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-transformers</artifactId>
			<version>${project.version}</version>
			<exclusions>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>jsp-api-2.1</artifactId>
				</exclusion>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>servlet-api-2.5</artifactId>
				</exclusion>
				<!-- excluding provided libraries -->
				<exclusion>
					<groupId>org.apache.hbase</groupId>
					<artifactId>hbase</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-citationmatching-direct</artifactId>
			<version>${project.version}</version>
			<exclusions>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>jsp-api-2.1</artifactId>
				</exclusion>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>servlet-api-2.5</artifactId>
				</exclusion>
				<!-- excluding provided libraries -->
				<exclusion>
					<groupId>org.apache.hbase</groupId>
					<artifactId>hbase</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-collapsers</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-statistics</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-websiteusage</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-citationmatching</artifactId>
			<version>${project.version}</version>
			<exclusions>
				<exclusion>
					<!-- fixing slf4j multiple bindings issue -->
					<groupId>org.slf4j</groupId>
					<artifactId>slf4j-simple</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-referenceextraction</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-documentsclassification</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		<dependency>
			<groupId>eu.dnetlib.iis</groupId>
			<artifactId>iis-workflows-documentssimilarity</artifactId>
			<version>${project.version}</version>
		</dependency>
		
		
		<!-- required after introducing 'provided' scope for hadoop libs -->
		<dependency>
			<groupId>org.apache.oozie</groupId>
			<artifactId>oozie-core</artifactId>
			<scope>compile</scope>
			<!-- oozie-core doesn't seem to be provided on cluster! 
			<scope>provided</scope>
			 -->
			<exclusions>
				<exclusion>
					<!-- fixing slf4j multiple bindings issue -->
					<groupId>org.slf4j</groupId>
					<artifactId>slf4j-simple</artifactId>
				</exclusion>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>servlet-api-2.5</artifactId>
				</exclusion>
				<exclusion>
					<groupId>javax.servlet.jsp</groupId>
					<artifactId>jsp-api</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<dependency>
			<groupId>org.apache.hadoop</groupId>
			<artifactId>hadoop-hdfs</artifactId>
			<scope>provided</scope>
			<exclusions>
				<!-- has to be excluded explicitly due to the missing 
				org.apache.jasper.Constants.IS_SECURITY_ENABLED field. 
				Otherwise tests fail. -->
				<exclusion>
					<groupId>tomcat</groupId>
					<artifactId>jasper-runtime</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<dependency>
			<groupId>org.apache.hbase</groupId>
			<artifactId>hbase-client</artifactId>
			<exclusions>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>servlet-api-2.5</artifactId>
				</exclusion>
				<exclusion>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>jsp-api-2.1</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		
	
		
		<dependency>
			<groupId>commons-io</groupId>
			<artifactId>commons-io</artifactId>
		</dependency>
		
		<!-- incompatible version is conveyed by iis-workflows-citationmatching -->
		<!-- unfortunatelly it adds JobACLsManager which breaks dependancy -->
		<!-- 
		<dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-client</artifactId>
        </dependency>
		 -->
		
	</dependencies>
	<build>
		<plugins>
			<!-- Plugin that generates Java classes from Avro schemas -->
			<plugin>
				<groupId>org.apache.avro</groupId>
				<artifactId>avro-maven-plugin</artifactId>
			</plugin>

			<!-- This plugin makes the Maven->Update Project Configuration 
			not forget about the "target/generated-sources/java" source path-->
 
			<plugin>
			    <groupId>org.codehaus.mojo</groupId>
			    <artifactId>build-helper-maven-plugin</artifactId>
			    <version>1.8</version>
			    <executions>
			        <execution>
			            <id>add-test-source</id>
			            <phase>generate-test-sources</phase>
			            <goals>
			                <goal>add-test-source</goal>
			            </goals>
			            <configuration>
			                <sources>
			                    <source>${project.build.directory}/generated-sources/java/</source>
			                </sources>
			            </configuration>
			        </execution>
			    </executions>
			 </plugin>
		</plugins>

		
	</build>
</project>
